<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./main.css" />
    <title>Document</title>
  </head>
  <body>
    <form class="form">
      <div class="form-header">
        <img class="form-logo" src="./images/logo.png" alt="" />
        <span class="form-title">Đăng ký</span>
      </div>
      <div class="form-field">
        <div class="form-input form-input--require">
          <input
            autocomplete="off"
            id="fullname"
            name="fullname"
            placeholder=" "
            type="text"
          />
          <label for="fullname">họ tên</label>
        </div>
        <span id="fullnameError"></span>
      </div>
      <div class="form-field">
        <div class="form-input form-input--require">
          <input autocomplete="off" id="birthday" placeholder=" " type="text" />
          <label for="birthday">ngày sinh: mm/dd/yy</label>
        </div>
        <span id="birthdayError"></span>
      </div>
      <div class="form-field form-field--check">
        <p class="form-field-title">Giới tính:</p>
        <div class="form-check">
          <div class="form-check-item">
            <input id="gender-male" name="gender" type="radio" />
            <label for="gender-male" class="form-check-input">
              <ion-icon name="checkmark-sharp"></ion-icon>
            </label>
            <label for="gender-male">Nam</label>
          </div>
          <div class="form-check-item">
            <input id="gender-female" name="gender" type="radio" />
            <label for="gender-female" class="form-check-input">
              <ion-icon name="checkmark-sharp"></ion-icon>
            </label>
            <label for="gender-female">Nữ</label>
          </div>
        </div>
      </div>
      <div class="form-field">
        <div class="form-input form-input--require">
          <input autocomplete="off" id="email" placeholder=" " type="text" />
          <label for="email">email</label>
        </div>
        <span id="emailError"></span>
      </div>
      <div class="form-field">
        <div class="form-input">
          <input
            autocomplete="off"
            id="numberphone"
            placeholder=" "
            type="text"
          />
          <label for="numberphone">điện thoại</label>
        </div>
        <span></span>
      </div>
      <div class="form-field form-field--check form-field--check--checkbox">
        <p class="form-field-title">Khóa học:</p>
        <div class="form-check">
          <div class="form-check-item">
            <input id="english" name="course" type="checkbox" />
            <label for="english" class="form-check-input">
              <ion-icon name="checkmark-sharp"></ion-icon>
            </label>
            <label for="english">Tiếng anh</label>
          </div>
          <div class="form-check-item">
            <input id="admin" name="course" type="checkbox" />
            <label for="admin" class="form-check-input">
              <ion-icon name="checkmark-sharp"></ion-icon>
            </label>
            <label for="admin">Quản trị</label>
          </div>
          <div class="form-check-item">
            <input id="technology" name="course" type="checkbox" />
            <label for="technology" class="form-check-input">
              <ion-icon name="checkmark-sharp"></ion-icon>
            </label>
            <label for="technology">Cntt</label>
          </div>
        </div>
      </div>
      <div class="form-field">
        <div class="form-input form-input--require">
          <input
            autocomplete="off"
            id="password"
            placeholder=" "
            type="password"
          />
          <label for="password">mật khẩu</label>
        </div>
        <span id="passwordError"></span>
      </div>
      <div class="form-field">
        <div class="form-input form-input--require">
          <input
            autocomplete="off"
            id="confirmpassword"
            placeholder=" "
            type="password"
          />
          <label for="confirmpassword">xác nhận mật khẩu</label>
        </div>
        <span id="confirmpasswordError"></span>
      </div>
      <div class="form-field">
        <div class="form-input">
          <textarea
            autocomplete="off"
            id="note"
            placeholder=" "
            type="text"
          ></textarea>
          <label for="note">ghi chú</label>
        </div>
        <span></span>
      </div>
      <div class="form-field-file">
        <label for="portrait">Ảnh chân dung</label>
        <input
          id="portrait"
          type="file"
          accept="image/*"
          onchange="readURL(this)"
        />
        <img id="portrait-image" src="" />
      </div>
      <button type="submit">Đăng ký</button>
    </form>
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
    <script src="./validate.js"></script>
    <script>
      function readURL(input) {
        if (input.files && input.files[0]) {
          const reader = new FileReader();

          reader.onload = function (e) {
            document
              .querySelector("#portrait-image")
              .setAttribute("src", e.target.result);
          };

          reader.readAsDataURL(input.files[0]);
        }
      }
      const handleSubmit = new Validate({
        form: ".form",
        rules: [
          Validate.isValidate("#fullname", "#fullnameError", [
            {
              regex: /^[a-zA-Z ]+$/,
              message: "Vui lòng nhập đúng tên của bạn",
            },
          ]),
          Validate.isValidate("#birthday", "#birthdayError", [
            {
              regex:
                /^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g,
              message: "Vui lòng nhập đúng ngày sinh của bạn",
            },
          ]),
          Validate.isValidate("#email", "#emailError", [
            {
              regex:
                /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
              message: "Vui lòng nhập đúng email của bạn",
            },
          ]),
          Validate.isValidate("#password", "#passwordError", [
            {
              regex: /^(?=.*\d).{6,}$/,
              message: "mật khẩu chứa ít nhất 6 kí tự",
            },
          ]),
          Validate.isConfirm(
            "#password",
            "#confirmpassword",
            "#confirmpasswordError",
            "Mật khẩu không khớp"
          ),
        ],
      });
      document.querySelector(".form").onsubmit = async function (e) {
        e.preventDefault();
        handleSubmit().then((data) => {
          if (data) document.querySelector(".form").submit();
        });
      };
    </script>
  </body>
</html>
